!function e(t,i,n){function a(o,l){if(!i[o]){if(!t[o]){var s="function"==typeof require&&require;if(!l&&s)return s(o,!0);if(r)return r(o,!0);var u=new Error("Cannot find module '"+o+"'");throw u.code="MODULE_NOT_FOUND",u}var c=i[o]={exports:{}};t[o][0].call(c.exports,function(e){var i=t[o][1][e];return a(i?i:e)},c,c.exports,e,t,i,n)}return i[o].exports}for(var r="function"==typeof require&&require,o=0;o<n.length;o++)a(n[o]);return a}({1:[function(e,t,i){"use strict";function n(e){e=e||{},this.settings=e,null==e.statusInterval&&(e.statusInterval=5e3),null==e.loggingDelay&&(e.loggingDelay=2e4),null==e.noProgressTimeout&&(e.noProgressTimeout=1/0);var t,i=[],n=[],r=Date.now(),o={QUEUED:0,WAITING:1,LOADED:2,ERROR:3,TIMEOUT:4},l=function(e){return null==e?[]:Array.isArray(e)?e:[e]};this.add=function(e){e.tags=new a(e.tags),null==e.priority&&(e.priority=1/0),i.push({resource:e,status:o.QUEUED})},this.addProgressListener=function(e,t){n.push({callback:e,tags:new a(t)})},this.addCompletionListener=function(e,t){n.push({tags:new a(t),callback:function(t){t.completedCount===t.totalCount&&e(t)}})};var s=function(e){e=l(e);var t=function(t){for(var i=t.resource,n=1/0,a=0;a<i.tags.length;a++)for(var r=0;r<Math.min(e.length,n)&&!(i.tags.all[a]===e[r]&&r<n&&(n=r,0===n))&&0!==n;r++);return n};return function(e,i){var n=t(e),a=t(i);return n<a?-1:n>a?1:e.priority<i.priority?-1:e.priority>i.priority?1:0}};this.start=function(e){t=Date.now();var n=s(e);i.sort(n);for(var a=0,r=i.length;a<r;a++){var l=i[a];l.status=o.WAITING,l.resource.start(this)}setTimeout(u,100)};var u=function f(){for(var t=!1,n=Date.now()-r,a=n>=e.noProgressTimeout,l=n>=e.loggingDelay,s=0,u=i.length;s<u;s++){var c=i[s];c.status===o.WAITING&&(c.resource.checkStatus&&c.resource.checkStatus(),c.status===o.WAITING&&(a?c.resource.onTimeout():t=!0))}l&&t&&p(),t&&setTimeout(f,e.statusInterval)};this.isBusy=function(){for(var e=0,t=i.length;e<t;e++)if(i[e].status===o.QUEUED||i[e].status===o.WAITING)return!0;return!1};var c=function(e,t){var a,l,s,u,c,p=null;for(a=0,l=i.length;a<l;a++)if(i[a].resource===e){p=i[a];break}if(null!=p&&p.status===o.WAITING)for(p.status=t,r=Date.now(),s=e.tags.length,a=0,l=n.length;a<l;a++)u=n[a],c=0===u.tags.length||e.tags.intersects(u.tags),c&&d(p,u)};this.onLoad=function(e){c(e,o.LOADED)},this.onError=function(e){c(e,o.ERROR)},this.onTimeout=function(e){c(e,o.TIMEOUT)};var d=function(e,t){var n,a,r,l,s=0,u=0;for(n=0,a=i.length;n<a;n++)r=i[n],l=!1,l=0===t.tags.length||r.resource.tags.intersects(t.tags),l&&(u++,r.status!==o.LOADED&&r.status!==o.ERROR&&r.status!==o.TIMEOUT||s++);t.callback({resource:e.resource,loaded:e.status===o.LOADED,error:e.status===o.ERROR,timeout:e.status===o.TIMEOUT,completedCount:s,totalCount:u})},p=this.log=function(e){if(window.console){var n=Math.round((Date.now()-t)/1e3);window.console.log("PxLoader elapsed: "+n+" sec");for(var a=0,r=i.length;a<r;a++){var l=i[a];if(e||l.status===o.WAITING){var s="PxLoader: #"+a+" "+l.resource.getName();switch(l.status){case o.QUEUED:s+=" (Not Started)";break;case o.WAITING:s+=" (Waiting)";break;case o.LOADED:s+=" (Loaded)";break;case o.ERROR:s+=" (Error)";break;case o.TIMEOUT:s+=" (Timeout)"}l.resource.tags.length>0&&(s+=" Tags: ["+l.resource.tags.all.join(",")+"]"),window.console.log(s)}}}}}function a(e){if(this.all=[],this.first=null,this.length=0,this.lookup={},e){if(Array.isArray(e))this.all=e.slice(0);else if("object"===("undefined"==typeof e?"undefined":o(e)))for(var t in e)e.hasOwnProperty(t)&&this.all.push(t);else this.all.push(e);this.length=this.all.length,this.length>0&&(this.first=this.all[0]);for(var i=0;i<this.length;i++)this.lookup[this.all[i]]=!0}}function r(e,t,i,n){var a=this,r=null;this.img=new Image,void 0!==n&&(this.img.crossOrigin=n),this.tags=t,this.priority=i;var o=function(){"complete"===a.img.readyState&&(u(),r.onLoad(a))},l=function(){u(),r.onLoad(a)},s=function(){u(),r.onError(a)},u=function(){a.unbind("load",l),a.unbind("readystatechange",o),a.unbind("error",s)};this.start=function(t){r=t,a.bind("load",l),a.bind("readystatechange",o),a.bind("error",s),a.img.src=e},this.checkStatus=function(){a.img.complete&&(u(),r.onLoad(a))},this.onTimeout=function(){u(),a.img.complete?r.onLoad(a):r.onTimeout(a)},this.getName=function(){return e},this.bind=function(e,t){a.img.addEventListener?a.img.addEventListener(e,t,!1):a.img.attachEvent&&a.img.attachEvent("on"+e,t)},this.unbind=function(e,t){a.img.removeEventListener?a.img.removeEventListener(e,t,!1):a.img.detachEvent&&a.img.detachEvent("on"+e,t)}}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};a.prototype.intersects=function(e){if(0===this.length||0===e.length)return!1;if(1===this.length&&1===e.length)return this.first===e.first;if(e.length<this.length)return e.intersects(this);for(var t in this.lookup)if(e.lookup[t])return!0;return!1},n.prototype.addImage=function(e,t,i,n){var a=new r(e,t,i,n);return this.add(a),a.img},Date.now||(Date.now=function(){return(new Date).getTime()}),Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),t.exports=n},{}],2:[function(e,t,i){"use strict";t.exports={USER:{E_FORMAT:"EUSER_FORMAT",E_SIZE_EXCEEDED:"EUSER_SIZE_EXCEEDED",E_SIZE_INFERIOR:"EUSER_SIZE_INFERIOR"}}},{}],3:[function(e,t,i){"use strict";t.exports={_id:null,_type:null,_$container:null,_$validations:null,_$dropzone:null,_$msg:null,_url:null,_file:null,_name:null,_width:null,_height:null,_uploading:!1,type:"all",url:null,name:"",enableReupload:!0,imageContain:!1,imageResize:!0,imageMinHeight:100,imageMaxHeight:400,canRemove:!0,showValidations:!0,handler:null,fileupload:{url:"/api/files",type:"POST",paramName:"file",dataType:"json",singleFileUploads:!0,limitMultiFileUploads:1,sequentialUploads:!0,autoUpload:!0,fileInput:null,dropZone:null,replaceFileInput:!1,maxNumberOfFiles:1,minFileSize:1,maxFileSize:2e6,acceptFileTypes:void 0},types:{all:{name:"file",formats:void 0,formatsText:"any"},image:{name:"image",formats:/(\.|\/)(gif|jpe?g|png)$/i,formatsText:"JPG, JPEG, PNG and GIF"},pdf:{name:"PDF file",formats:/(application\/pdf|application\/x\-pdf)/i,formatsText:"PDF"}},messages:{UPLOAD:"Drag and drop {{name}} or browse",UPLOADING:"Uploading",REUPLOAD:"Click to upload a new {{name}}",UPLOADED:"Uploaded",ERROR:"Error, please try again",REMOVE:"Remove {{name}}",EUSER_FORMAT:"File format is invalid. Accepted file types include: {{formatsText}}.",EUSER_SIZE_EXCEEDED:"File exceeds the maximum size: {{maxSize}}. Please use another.",EUSER_SIZE_INFERIOR:"File size is below the minimum size: {{minSize}}. Please use another."},icons:{UPLOAD:"mdi mdi-cloud-upload",UPLOADING:"mdi mdi-cloud",REUPLOAD:"mdi mdi-cloud-upload",UPLOADED:"mdi mdi-cloud-check",ERROR:"mdi mdi-alert",REMOVE:"mdi mdi-close"}}},{}],4:[function(e,t,i){"use strict";var n=e("./constants");$.blueimp.fileupload.prototype.options.processQueue.push({action:"vulcanupValidation",always:!0,acceptFileTypes:"@",maxFileSize:"@",minFileSize:"@",maxNumberOfFiles:"@",disabled:"@disableValidation"}),$.widget("blueimp.fileupload",$.blueimp.fileupload,{options:{getNumberOfFiles:$.noop,messages:{maxNumberOfFiles:"ERROR",acceptFileTypes:n.USER.E_FORMAT,maxFileSize:n.USER.E_SIZE_EXCEEDED,minFileSize:n.USER.E_SIZE_INFERIOR}},processActions:{vulcanupValidation:function(e,t){if(t.disabled)return e;var i,n=$.Deferred(),a=this.options,r=e.files[e.index];return(t.minFileSize||t.maxFileSize)&&(i=r.size),"number"===$.type(t.maxNumberOfFiles)&&(a.getNumberOfFiles()||0)+e.files.length>t.maxNumberOfFiles?r.error=a.i18n("maxNumberOfFiles"):!t.acceptFileTypes||t.acceptFileTypes.test(r.type)||t.acceptFileTypes.test(r.name)?i>t.maxFileSize?r.error=a.i18n("maxFileSize"):"number"===$.type(i)&&i<t.minFileSize?r.error=a.i18n("minFileSize"):delete r.error:r.error=a.i18n("acceptFileTypes"),r.error||e.files.error?(e.files.error=!0,n.rejectWith(this,[e])):n.resolveWith(this,[e]),n.promise()}}})},{"./constants":2}],5:[function(e,t,i){"use strict";var n=e("./PxLoader"),a=(e("./constants"),e("./utils")),r={update:function(e){this.data("vulcanup-config");return e=$.extend(e,{noXHR:!0}),r.setUploaded.call(this,e),this},get:function(){var e=this.data("vulcanup-config");return e._url?{url:e._url,name:e._name}:null},setUpload:function(){var e=this.data("vulcanup-config");e._url=null,e._name=null,r.reset.call(this);var t=a.format(e.messages.UPLOAD,e._type);e._$msg.html('<i class="'+e.icons.UPLOAD+'"></i> '+t)},setUploading:function(){var e=this.data("vulcanup-config");r.hideValidation.call(this),r.reset.call(this),e._$container.addClass("vulcanup_uploading");var t=a.format(e.messages.UPLOADING,e._type);e._$msg.html('<i class="'+e.icons.UPLOADING+'"></i> '+t),e._uploading=!0,this.trigger("vulcanup-upload"),r.updateProgress.call(this,0)},updateProgress:function(){var e=arguments.length<=0||void 0===arguments[0]?0:arguments[0],t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];e=Math.max(0,e),e=Math.min(100,e);var i=this.data("vulcanup-config");i._$container.find(".vulcanup__progressbar span").width(e+"%"),t.silent||this.trigger("vulcanup-progress",e)},setError:function(e){var t=this.data("vulcanup-config");r.reset.call(this),r.updateProgress.call(this,100);var i=a.format(t.messages.ERROR,t._type);t._$container.addClass("vulcanup_error"),t._$msg.html('<i class="'+t.icons.ERROR+'"></i> '+i),t._uploading=!1,this.trigger("vulcanup-error",e),this.trigger("vulcanup-complete")},setUploaded:function(e){var t=e.url,i=e.file,n=e.name,o=e.initial,l=e.noXHR;if("string"!=typeof t||!t.length)throw new Error("An URL path is required");var s=this.data("vulcanup-config");s._url=t,s._file=i,s._name=n,r.hideValidation.call(this),r.reset.call(this),r.updateProgress.call(this,100,{silent:!0}),s._$container.addClass("vulcanup_uploaded");var u=void 0,c=void 0;s.enableReupload?(u='<i class="'+s.icons.REUPLOAD+'"></i>',c=a.format(s.messages.REUPLOAD,s._type)):(u='<i class="'+s.icons.UPLOADED+'"></i>',c=n?n:i&&i.name?i.name:a.format(s.messages.UPLOADED,s._type)),s._$msg.html(u+" "+c),"image"===s.type&&r.loadImage.call(this),s._uploading=!1,o||(this.trigger("vulcanup-change",{url:t,name:i&&i.name?i.name:n}),l||(this.trigger("vulcanup-uploaded"),this.trigger("vulcanup-complete")))},reset:function(){var e=this.data("vulcanup-config");e._$container.removeClass(["vulcanup_uploading","vulcanup_uploaded","vulcanup_error"].join(" ")),e._$dropzone.removeAttr("style")},resize:function(){var e=this.data("vulcanup-config");if(e.imageResize){var t=e._$dropzone,i=e._width,n=e._height,a=t.width(),r=void 0;r=i&&n?Math.round(a*n/i):Math.round(.55*a),e.imageMinHeight&&(r=Math.max(r,e.imageMinHeight)),e.imageMaxHeight&&(r=Math.min(r,e.imageMaxHeight)),t.height(r)}},loadImage:function(e){var t=this,i=this.data("vulcanup-config");e=e||i._url||i.url,i._url=e;var a=($(this),i._$dropzone),o=new n,l=o.addImage(e);r.resize.call(this),a.css("background-image","url("+e+")"),o.addCompletionListener(function(){var e=l.naturalWidth||l.width,n=l.naturalHeight||l.height;i._width=e,i._height=n,r.resize.call(t)}),o.start()},setValidation:function(e){var t=this.data("vulcanup-config"),i=t.messages[e],n=$.extend({},t._type,{minSize:a.formatSize(t.fileupload.minFileSize),maxSize:a.formatSize(t.fileupload.maxFileSize)}),r=a.format(i,n);this.trigger("vulcanup-val",{error:r}),t.showValidations&&t._$validations.html(r).hide(0).show(300)},hideValidation:function(){var e=this.data("vulcanup-config");e.showValidations&&e._$validations.hide(300)}};t.exports=r},{"./PxLoader":1,"./constants":2,"./utils":7}],6:[function(e,t,i){"use strict";t.exports={main:['<div class="vulcanup">','<i class="vulcanup__remove {{icons.REMOVE}}" title=""></i>','<label class="vulcanup__dropzone" for="{{_id}}">','<div class="vulcanup__placeholder">','<span class="vulcanup__placeholder__content">','<span class="vulcanup__msg"></span>',"</span>","</div>","</label>",'<div class="vulcanup__progressbar">',"<span></span>","</div>","</div>"].join(""),validations:['<div class="vulcanup-validations"></div>'].join(".")}},{}],7:[function(e,t,i){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},a={removeArrayDuplicates:function(e){for(var t={},i=0;i<e.length;i++)t[e[i]]=!0;e=[];for(var n in t)e.push(n);return e},format:function(e,t){e=String(e),t=t||{};var i=function u(e,t,i){if(t[i])return"object"===n(e[t[i]])?u(e[t[i]],t,i+1):e[t[i]]},r=void 0,o=void 0,l=e.match(/\{\{\w+(\w|\.\w+)*\}\}/g);if(l&&l.length){l=a.removeArrayDuplicates(l),l=l.map(function(e){return e.replace("{{","").replace("}}","").split(".")});for(var s=0;s<l.length;s++)o=i(t,l[s],0),o&&(r=l[s].join("."),e=e.replace(new RegExp("{{"+r+"}}","g"),o))}return e},formatSize:function(e){var t="B";return e=Number(e),e>=1e6?(t="MB",e/=1e6):e>=1e3&&(t="KB",e/=1e3),e+" "+t}};t.exports=a},{}],8:[function(e,t,i){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};e("./jup-validation");var a=e("./templates"),r=(e("./constants"),e("./defaults")),o=e("./methods"),l=e("./utils");$(document).on("drop dragover",function(e){e.preventDefault()}),jQuery.fn.vulcanup=function(e){var t=$(this).first();if("string"==typeof e){if(o[e]){if(!t.data("vulcanup-config"))throw new Error("vulcanup element is not instantiated, cannot invoke methods");var i=Array.prototype.slice.call(arguments,1);return o[e].apply(t,i)}throw new Error('vulcanup method unrecognized "'+e+'".')}if(t.data("vulcanup-config"))return this;var s=t.attr("id");if(s||(s="vulcanup-"+(new Date).getTime(),t.attr("id",s)),void 0!==t.attr("multiple"))throw new Error("Input type file cannot be multiple");var u=$.extend(!0,{},r,e,{_id:s,fileupload:{fileInput:t}});if(!u.types[u.type])throw new Error("A valid type of file is required");u._type=u.types[u.type],u.fileupload.acceptFileTypes=u._type.formats,t.data("vulcanup-config",u);var c=$(l.format(a.main,u)),d=$(l.format(a.validations,u)),p=c.find(".vulcanup__remove"),f=c.find(".vulcanup__dropzone"),m=c.find(".vulcanup__msg");return p.attr("title",l.format(u.messages.REMOVE,u._type)),t.addClass("vulcanup-input vulcanup-input__hidden"),t.after(c),c.after(d),u.fileupload.dropZone=c,u._$validations=d,u._$container=c,u._$dropzone=f,u._$msg=m,"image"===u.type&&c.addClass("vulcanup_isimage"),u.imageContain&&c.addClass("vulcanup_isimagecontain"),u.enableReupload||c.addClass("vulcanup_noreupload"),u.canRemove&&c.addClass("vulcanup_canremove"),t.on("click",function(e){if(u._uploading||u._url&&!u.enableReupload)return e.preventDefault(),!1}).on("fileuploadprocessfail",function(e,i){var n=i.files[0].error;o.setValidation.call(t,n)}).on("fileuploadsend",function(e,i){o.setUploading.call(t)}).on("fileuploadprogressall",function(e,i){var n=parseInt(i.loaded/i.total*100,10);o.updateProgress.call(t,n)}).on("fileuploaddone",function(e,i){var a=i.files,r=i.result;if(u.handler){var l=u.handler(r);if("object"!==("undefined"==typeof l?"undefined":n(l)))throw o.setError.call(t),new Error("handler should return file object info");if("string"!=typeof l.url)throw o.setError.call(t),new Error("handler should return file url property");o.setUploaded.call(t,{url:l.url,file:a[0]})}else r&&r.files&&r.files.length?o.setUploaded.call(t,{url:r.files[0].url,file:a[0]}):o.setError.call(t)}).on("fileuploadfail",function(e,i){o.setError.call(t)}),f.on("dragenter dragover",function(e){c.addClass("vulcanup_dragover")}).on("dragleave drop",function(e){c.removeClass("vulcanup_dragover")}),c.find(".vulcanup__remove").on("click",function(e){return e.preventDefault(),o.updateProgress.call(t,0,{silent:!0}),o.setUpload.call(t),t.trigger("vulcanup-delete"),t.trigger("vulcanup-change",{url:null,name:null}),!1}),t.fileupload(u.fileupload),u.url?o.setUploaded.call(this,{url:u.url,name:u.name,initial:!0}):o.setUpload.call(this),this}},{"./constants":2,"./defaults":3,"./jup-validation":4,"./methods":5,"./templates":6,"./utils":7}]},{},[8]);